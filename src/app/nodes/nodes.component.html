<div class="container">
  <mat-toolbar>Tree</mat-toolbar>

  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Add new node in the Tree
      </mat-panel-title>
    </mat-expansion-panel-header>
    <mat-form-field>
      <input matInput placeholder="Name" [(ngModel)]="newNode.name">
    </mat-form-field>
    <mat-form-field>
      <!-- todo: validation for 15 -->
      <input matInput type="number" max="15" placeholder="Count" [(ngModel)]="newNode.count">
    </mat-form-field>
    <mat-form-field>
      <input matInput type="number" placeholder="Lower Bound" [(ngModel)]="newNode.lower">
    </mat-form-field>
    <mat-form-field>
      <input matInput type="number" placeholder="Uper Bound" [(ngModel)]="newNode.higher">
    </mat-form-field>
    <button mat-button (click)="onCreateNode(newNode)">Create</button>
  </mat-expansion-panel>
  <mat-divider></mat-divider>
  <mat-tree [dataSource]="nestedDataSource" [treeControl]="nestedTreeControl"  class="example-tree"> 
    <!-- This is the tree node template for leaf nodes -->
  <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
    <li class="mat-tree-node">
      <!-- use a disabled button to provide padding for tree leaf -->
      <button mat-icon-button disabled></button>
      {{node.name}}
    </li>
  </mat-tree-node>
    <!-- This is the tree node template for expandable nodes -->
    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
      <li>
        <div class="mat-tree-node">
          <button mat-icon-button matTreeNodeToggle>
            <mat-icon class="mat-icon-rtl-mirror">
              {{nestedTreeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
            </mat-icon>
          </button>
          <button mat-button (click)="openDialog(node)">{{node.name}}</button>
          <mat-icon (click)="openRename(node)">edit</mat-icon>
          <mat-chip-list class="chip">
            <mat-chip color="primary">{{node.lower}} : {{node.higher}}</mat-chip>
          </mat-chip-list>
        </div>
        <mat-list [class.example-tree-invisible]="!nestedTreeControl.isExpanded(node)">
          <mat-list-item  *ngFor="let child of node.children">{{child}}</mat-list-item>
        </mat-list>
      </li>
    </mat-nested-tree-node>
  </mat-tree>
</div>
